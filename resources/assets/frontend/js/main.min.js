const axSetLocation=function(e){try{return void(window.location.href=e)}catch(e){}},errorResponse=function(e){if(e&&e.responseJSON&&400===e.responseJSON.status_code){let t=e.responseJSON.error;if(t&&Object.keys(t).length)for(let e in t){let n=`[data-validator="${e}"]`;$(n).addClass("is-invalid");let o=$(n).closest(".form-label-group").find(".invalid-feedback"),r="";for(let n in t[e])r+=t[e][n]+" ";o.html(r),o.show()}}},errorResponseClear=function(e){e.find(".is-invalid").removeClass("is-invalid"),e.find(".invalid-feedback").html("")};function userRegistrationFormSend(){$(".js-registration").on("click",".js-registration-user-submit-button",(function(e){e.preventDefault();let t=$(this).closest("#registration-user-form");errorResponseClear(t);let n=new FormData(t[0]);$.ajax({url:"/ajax/registration",type:"POST",dataType:"json",data:n,processData:!1,contentType:!1,beforeSend:function(){},success:function(e){if(e.status){t[0].reset();let n=$(".js-registration .js-qr"),o=e.data.view;n.html(o),n.closest(".card").slideDown(),e.data.url&&axSetLocation(e.data.url)}},error:function(e){errorResponse(e)},complete:function(){}})}))}function userLoginFormSend(){$(".js-login").on("click",".js-login-user-submit-button",(function(e){e.preventDefault();let t=$(this).closest("#login-user-form");errorResponseClear(t);let n=new FormData(t[0]);$.ajax({url:"/ajax/login",type:"POST",dataType:"json",data:n,processData:!1,contentType:!1,beforeSend:function(){},success:function(e){e.status&&e.data.url&&axSetLocation(e.data.url)},error:function(e){errorResponse(e)},complete:function(){}})}))}$(document).ready((function(){userRegistrationFormSend(),userLoginFormSend()}));
